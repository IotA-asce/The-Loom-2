<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branch Studio - The Loom</title>
    <style>
        /* Reset & Base */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --font-family: -apple-system, BlinkMacSystemFont, "SF Pro", "Segoe UI", system-ui, sans-serif;
            
            /* Colors - Light Mode */
            --bg-primary: #FAFAFA;
            --bg-secondary: #F5F5F7;
            --bg-card: #FFFFFF;
            --bg-context: #F3F4F6;
            
            --text-primary: #1D1D1F;
            --text-secondary: #6B7280;
            --text-muted: #9CA3AF;
            
            --border-color: #E5E7EB;
            --border-hover: #D1D5DB;
            
            /* Accent - Indigo/Purple */
            --accent-primary: #4F46E5;
            --accent-hover: #4338CA;
            --accent-light: #EEF2FF;
            --accent-border: #C7D2FE;
            
            /* Confidence Colors */
            --confidence-high: #10B981;
            --confidence-medium: #F59E0B;
            --confidence-low: #F97316;
            
            /* Special */
            --gold: #F59E0B;
            --gold-light: #FEF3C7;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 12px 32px rgba(0, 0, 0, 0.12);
            
            /* Transitions */
            --transition-fast: 200ms ease-out;
            --transition-medium: 300ms ease-out;
            --transition-slow: 500ms ease-out;
            
            /* Layout */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            transition: color var(--transition-fast);
        }

        .back-link:hover {
            color: var(--accent-primary);
        }

        .back-link svg {
            width: 16px;
            height: 16px;
            transition: transform var(--transition-fast);
        }

        .back-link:hover svg {
            transform: translateX(-3px);
        }

        .header-title-group {
            flex: 1;
            text-align: center;
        }

        .header-label {
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .premise-input {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            background: transparent;
            border: 1px dashed transparent;
            border-radius: var(--radius-sm);
            padding: 4px 12px;
            text-align: center;
            min-width: 300px;
            transition: all var(--transition-fast);
            cursor: text;
            font-style: italic;
        }

        .premise-input:hover {
            border-color: var(--border-color);
            background: var(--bg-secondary);
        }

        .premise-input:focus {
            outline: none;
            border-color: var(--accent-border);
            background: var(--accent-light);
            font-style: normal;
        }

        /* Context Bar */
        .context-bar {
            background: var(--bg-context);
            border-radius: var(--radius-md);
            padding: 16px 24px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .context-label {
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .context-value {
            font-size: 15px;
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 48px;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 16px;
            }
            
            .header-title-group {
                text-align: center;
            }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            display: flex;
            flex-direction: column;
            min-height: 240px;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-medium);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
            border-color: var(--border-hover);
        }

        .card.selected {
            border-color: var(--accent-primary);
            background: var(--accent-light);
            box-shadow: 0 0 0 3px var(--accent-border), var(--shadow-md);
        }

        .card.original {
            background: var(--bg-secondary);
            border-style: dashed;
        }

        .card.original:hover {
            transform: none;
            box-shadow: var(--shadow-sm);
        }

        /* Card Header */
        .card-header {
            margin-bottom: 20px;
        }

        .card-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-color);
        }

        /* Card Content */
        .card-content {
            flex: 1;
            margin-bottom: 20px;
        }

        .card-description {
            font-size: 16px;
            line-height: 1.65;
            color: var(--text-primary);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Card Footer */
        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .badge-selected {
            background: var(--bg-secondary);
            color: var(--text-muted);
        }

        .badge-plausible {
            background: var(--gold-light);
            color: var(--gold);
        }

        .badge-plausible svg {
            width: 14px;
            height: 14px;
        }

        /* Confidence */
        .confidence {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .confidence-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .confidence-value {
            font-size: 20px;
            font-weight: 700;
        }

        .confidence-high { color: var(--confidence-high); }
        .confidence-medium { color: var(--confidence-medium); }
        .confidence-low { color: var(--confidence-low); }

        .confidence-bar {
            width: 80px;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
        }

        .confidence-bar-fill {
            height: 100%;
            border-radius: 2px;
            transition: width var(--transition-slow);
        }

        .confidence-bar-fill.high { background: var(--confidence-high); }
        .confidence-bar-fill.medium { background: var(--confidence-medium); }
        .confidence-bar-fill.low { background: var(--confidence-low); }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-primary);
            border: 1px solid var(--accent-border);
        }

        .btn-secondary:hover {
            background: var(--accent-light);
            border-color: var(--accent-primary);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
        }

        .btn-ghost:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* Bottom Action Bar */
        .action-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
            gap: 16px;
        }

        .action-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Icons */
        .icon {
            width: 18px;
            height: 18px;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
            stroke: currentColor;
        }

        .icon-sm {
            width: 14px;
            height: 14px;
        }

        /* Selection State for Card */
        .card.selected .btn-secondary {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .card.selected .btn-secondary:hover {
            background: var(--accent-hover);
        }

        /* Empty State / Disabled Card */
        .card.original .card-footer {
            justify-content: flex-end;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <a href="#" class="back-link">
                <svg class="icon icon-sm" viewBox="0 0 24 24">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Analysis
            </a>
            <div class="header-title-group">
                <div class="header-label">Branch Studio</div>
                <input type="text" class="premise-input" value="What if Eren didn't transform?" />
            </div>
            <div style="width: 100px;"></div> <!-- Spacer for alignment -->
        </header>

        <!-- Context Bar -->
        <div class="context-bar">
            <span class="context-label">Anchor:</span>
            <span class="context-value">Chapter 5, The Battle of Trost</span>
        </div>

        <!-- Comparison Grid -->
        <div class="comparison-grid">
            <!-- Original Timeline Card -->
            <div class="card original">
                <div class="card-header">
                    <div class="card-label">Original Timeline</div>
                </div>
                <div class="card-content">
                    <p class="card-description">
                        Eren is killed by the titans, forcing Mikasa to take the lead and rally the remaining soldiers. The battle takes a darker turn as the Scouts struggle to hold the line without their most powerful weapon.
                    </p>
                </div>
                <div class="card-footer">
                    <span class="badge badge-selected">
                        <svg class="icon icon-sm" viewBox="0 0 24 24" style="stroke: currentColor;">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Selected
                    </span>
                </div>
            </div>

            <!-- Branch A Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-label">Branch A</div>
                </div>
                <div class="card-content">
                    <p class="card-description">
                        Eren controls his transformation and leads the defense of Trost with newfound precision. His tactical awareness combined with titan strength turns the tide of battle, inspiring hope among the troops.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="confidence">
                        <span class="confidence-label">Confidence</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="confidence-value confidence-high">87%</span>
                            <div class="confidence-bar">
                                <div class="confidence-bar-fill high" style="width: 87%;"></div>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 8px;">
                        <span class="badge badge-plausible">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            Most Plausible
                        </span>
                        <button class="btn btn-secondary">Select This Branch</button>
                    </div>
                </div>
            </div>

            <!-- Branch B Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-label">Branch B</div>
                </div>
                <div class="card-content">
                    <p class="card-description">
                        The Scouts arrive earlier and save Eren before he can be consumed. Levi's squad intercepts the titans, creating an opening for a strategic retreat rather than a desperate last stand.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="confidence">
                        <span class="confidence-label">Confidence</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="confidence-value confidence-medium">72%</span>
                            <div class="confidence-bar">
                                <div class="confidence-bar-fill medium" style="width: 72%;"></div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary">Select This Branch</button>
                </div>
            </div>

            <!-- Branch C Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-label">Branch C</div>
                </div>
                <div class="card-content">
                    <p class="card-description">
                        Annie reveals herself earlier to protect the secret of the titans. Her intervention changes the dynamics of the battle, but exposes her identity to those who might use it against her.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="confidence">
                        <span class="confidence-label">Confidence</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="confidence-value confidence-low">65%</span>
                            <div class="confidence-bar">
                                <div class="confidence-bar-fill low" style="width: 65%;"></div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary">Select This Branch</button>
                </div>
            </div>
        </div>

        <!-- Bottom Action Bar -->
        <div class="action-bar">
            <div class="action-group">
                <button class="btn btn-ghost">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Generation Settings
                </button>
                <button class="btn btn-ghost">
                    <svg class="icon" viewBox="0 0 24 24" style="transform: scaleX(-1);">
                        <polyline points="23 4 23 10 17 10"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </svg>
                    Regenerate
                </button>
            </div>
            <button class="btn btn-primary" disabled>
                Continue
                <svg class="icon icon-sm" viewBox="0 0 24 24">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>
</body>
</html>
