# Sub-Component 5.2: Premise Generator

## Purpose
Generate compelling "what if" premises for branches — the core hook that makes each branch interesting and distinct.

---

## Requirements Gathering

### Question 1: Premise Style

**Should premises be dramatic hooks or neutral descriptions?**

Options:
- **A. Dramatic hooks:** "What if Kira's sacrifice unlocked a darker power?"
- **B. Neutral descriptions:** "Branch where Kira chooses to flee instead of fight"
- **C. In-universe:** Character perspective titles
- **D. Hybrid:** Dramatic hook + neutral subtitle

Considerations:
- Dramatic hooks more engaging
- Neutral more informative
- User may prefer one style

### Question 2: Premise Distinctness

**How do we ensure premises are distinct and not variations of the same idea?**

Options:
- **A. Type-based:** One premise per anchor type
- **B. Magnitude-based:** Small change, medium change, large change
- **C. Character-based:** Different character perspectives
- **D. Theme-based:** Each premise explores different theme

Considerations:
- Variations feel redundant
- Too different may not fit anchor
- Need meaningful but related alternatives

### Question 3: User Guidance

**Should user provide guidance on premise direction?**

Options:
- **A. No guidance:** AI generates all premises
- **B. Theme guidance:** User picks theme (tragic, hopeful, dark, etc.)
- **C. Magnitude guidance:** User wants small/medium/large divergence
- **D. Character guidance:** User wants to explore specific character
- **E. Full custom:** User writes premise, AI develops it

Considerations:
- More guidance = more relevant to user
- Less guidance = more surprising discoveries
- Balance control and creativity

### Question 4: Premise Count

**How many premise options per anchor?**

Options:
- **A. Fixed:** Always generate exactly 3
- **B. Range:** Generate 2-5 based on anchor complexity
- **C. User choice:** User specifies how many
- **D. Quality-based:** Generate until confidence threshold met

Considerations:
- Too few = limited choice
- Too many = overwhelming
- Some anchors have fewer meaningful branches

### Question 5: Premise Validation

**What makes a premise "valid" for generation?**

Options:
- **A. Any alternative:** If different from original, valid
- **B. Plausibility check:** Must be realistically possible
- **C. Story-fit check:** Must fit narrative style and tone
- **D. Interest check:** Must be compelling/interesting
- **E. All of above:** Pass all validation layers

Considerations:
- Strict validation = fewer but better branches
- Loose validation = more options but some weak
- Quality important for user satisfaction

### Question 6: Premise Naming

**How should branches be named/titled?**

Options:
- **A. Descriptive:** "The Path of Sacrifice"
- **B. Event-based:** "When Kira Fled"
- **C. Consequence-based:** "The Fallen Village"
- **D. Character-emotion:** "Kira's Regret"
- **E. User-editable:** AI suggests, user can rename
- **F. Numbered:** "Branch 1", "Branch 2" (boring but clear)

Considerations:
- Names should be memorable
- Should hint at branch content
- User may want custom names

---

## Technical Considerations

### Premise Structure

```typescript
interface BranchPremise {
  id: string;
  anchorEventId: string;
  
  // Core premise
  whatIf: string;  // "What if..." statement
  hook: string;    // Dramatic hook
  description: string;  // Full description
  
  // Classification
  type: 'dramatic' | 'neutral' | 'character-focused' | 'theme-focused';
  divergence: 'subtle' | 'moderate' | 'drastic';
  tone: 'optimistic' | 'pessimistic' | 'neutral' | 'dark' | 'hopeful';
  
  // Validation
  validations: {
    plausible: boolean;
    storyFit: boolean;
    interesting: boolean;
  };
  
  // User interaction
  userAccepted: boolean;
  userModified: boolean;
  customName?: string;
}
```

### Premise Generation Prompt

```typescript
const PREMISE_GENERATION_PROMPT = `
Based on this anchor event and context, generate {{count}} distinct branch premises.

ANCHOR EVENT:
{{anchorEvent}}

CONTEXT:
{{context}}

GUIDANCE:
{{userGuidance}} // User preferences for theme/tone/magnitude

For each premise:
1. What specifically changes from the original?
2. What is the immediate consequence?
3. What makes this branch interesting?
4. How does this affect the overall story direction?

Generate {{count}} premises that are:
- Meaningfully different from each other
- Consistent with character personalities
- Interesting narrative directions
- Varied in tone (if not specified)

Output in structured JSON format.
`;
```

---

## Decisions Recorded

| Question | Decision | Rationale |
|----------|----------|-----------|
| 1. Premise Style | **D. Hybrid** | Dramatic hook + neutral subtitle for engagement + clarity |
| 2. Premise Distinctness | **D. Theme-based** | Each premise explores different theme for variety |
| 3. User Guidance | **D. Character guidance** | User can specify which character to focus exploration on |
| 4. Premise Count | **C. User choice** | User specifies how many premises to generate (2-5) |
| 5. Premise Validation | **E. All of above** | Plausibility + story-fit + interest checks |
| 6. Premise Naming | **E. User-editable** | AI suggests, user can rename for personalization |

### Hybrid Premise Format

```typescript
interface HybridPremise {
  // Dramatic hook (engaging)
  hook: string;  // "What if Kira's sacrifice unlocked a darker power?"
  
  // Neutral subtitle (informative)
  subtitle: string;  // "Branch where Kira chooses the forbidden ritual"
  
  // Full display
  displayTitle: string;  // "The Dark Bargain: Kira chooses the forbidden ritual"
}
```

### Theme-Based Distinctness

```typescript
interface ThemeBasedPremises {
  // Each premise explores different thematic territory
  premises: [
    {
      theme: 'redemption',
      hook: "What if Kira's sacrifice was seen as heroism?",
      subtitle: "Branch of redemption through sacrifice"
    },
    {
      theme: 'corruption', 
      hook: "What if Kira's sacrifice unlocked a darker power?",
      subtitle: "Branch of power through darkness"
    },
    {
      theme: 'consequence',
      hook: "What if Kira's sacrifice saved no one?",
      subtitle: "Branch of tragic consequences"
    }
  ];
}
```

### Character Guidance Interface

```typescript
interface PremiseGuidance {
  // User specifies character focus
  focusCharacter?: string;  // Character ID to explore
  
  // Optional additional guidance
  preferredTone?: 'optimistic' | 'pessimistic' | 'neutral';
  divergenceMagnitude?: 'subtle' | 'moderate' | 'drastic';
  
  // User can write custom premise seed
  customPremiseSeed?: string;  // "I want to explore if Kira becomes the villain"
}
```

### User-Controlled Premise Count

```typescript
interface PremiseGenerationRequest {
  anchorEventId: string;
  
  // User choice: 2-5 premises
  requestedCount: number;  // Default: 3
  
  // Validation
  minCount: 2;
  maxCount: 5;
  
  // AI may adjust if anchor doesn't support requested count
  actualCount: number;  // "Requested 5, but only 3 meaningful variations possible"
}
```

### Comprehensive Validation Layers

```typescript
interface PremiseValidation {
  // Layer 1: Plausibility
  plausible: {
    valid: boolean;
    score: number;  // 0-1
    issues: string[];
  };
  
  // Layer 2: Story fit
  storyFit: {
    valid: boolean;
    score: number;
    toneMatch: number;
    genreMatch: number;
    styleMatch: number;
  };
  
  // Layer 3: Interest/appeal
  interest: {
    valid: boolean;
    score: number;
    uniqueness: number;
    narrativeAppeal: number;
    surpriseFactor: number;
  };
  
  // Overall
  overallValid: boolean;
  overallScore: number;
  
  // Auto-fix or flag
  canAutoFix: boolean;
  suggestedFixes: string[];
}
```

### User-Editable Naming

```typescript
interface BranchNaming {
  // AI generates suggestions
  aiSuggestions: string[];  // 3-5 suggestions
  
  // User options
  selectedName: string;  // From suggestions or custom
  isCustom: boolean;
  
  // Examples:
  // AI: ["The Dark Bargain", "Kira's Choice", "The Forbidden Ritual"]
  // User selects: "The Dark Bargain"
  // OR User custom: "When Kira Sold Her Soul"
}
```

---

## Status: ✅ Interrogation Complete

**Next: Sub-Component 5.3 — Branch Variation Generator**
