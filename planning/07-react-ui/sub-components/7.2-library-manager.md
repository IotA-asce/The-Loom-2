# Sub-Component 7.2: Library Manager

## Purpose
Browse, organize, and manage the user's manga collection and generated stories.

---

## Requirements Gathering

### Question 1: Default View

**Default view — grid or list? What information density?**

Options:
- **A. Grid (large cards):** Cover-focused, visual browsing
- **B. Grid (small cards):** More items visible, compact
- **C. List (detailed):** Rich information per item
- **D. List (compact):** Many items, minimal info
- **E. Adaptive:** User choice, remembers preference

Apple Reference:
- Photos app: Grid view default
- Books app: Grid for library
- Finder: List view common

Considerations:
- Grid = visual, good for covers
- List = more information
- User preference important

### Question 2: Organization Method

**Organization — folders, tags, or both?**

Options:
- **A. Folders only:** Hierarchical organization
- **B. Tags only:** Flexible categorization
- **C. Both:** Folders + tags
- **D. Auto-organized:** AI-suggested categories
- **E. Flat:** No organization, just search/filter

Apple Reference:
- Photos: Albums (folders) + auto-categories
- Notes: Folders + tags
- Files: Folders primarily

Considerations:
- Folders = familiar hierarchy
- Tags = flexible, multiple categories
- Both = maximum flexibility

### Question 3: Search Scope

**Search scope — titles only or full content?**

Options:
- **A. Titles only:** Fast, simple
- **B. Titles + metadata:** Title, author, tags
- **C. Full content:** Search within chapters (if analyzed)
- **D. Smart search:** AI-powered semantic search
- **E. Filtered search:** Advanced filters + search

Considerations:
- Titles only = fast but limited
- Full content = powerful but slower
- Smart = best results but complex

### Question 4: Generated Stories Location

**Generated stories — separate section or integrated?**

Options:
- **A. Separate section:** "Generated Stories" tab/area
- **B. Integrated:** Stories appear with source manga
- **C. Both views:** Toggle between combined/separate
- **D. Nested:** Stories under their source manga
- **E. Timeline:** All content in chronological order

Considerations:
- Separate = clear distinction
- Integrated = shows relationship
- Nested = clear hierarchy

### Question 5: Quick Actions

**What quick actions should be available on manga cards?**

Rank by importance:
- Analyze (start analysis)
- Read/Continue (jump to reader)
- Delete
- Export
- Edit metadata
- Share
- Duplicate

### Question 6: Empty State

**What should empty state show?**

Options:
- **A. Simple message:** "No manga yet"
- **B. Call to action:** "Upload your first manga" button
- **C. Sample/demo:** Show example manga
- **D. Tutorial:** Explain how to use app
- **E. Full onboarding:** First-time experience

---

## Technical Considerations

### Library State

```typescript
interface LibraryManager {
  view: 'grid' | 'list';
  
  organization: {
    folders: Folder[];
    tags: Tag[];
  };
  
  filter: {
    status: 'all' | 'analyzed' | 'unread' | 'reading';
    tags: string[];
    dateRange?: DateRange;
  };
  
  sort: {
    by: 'recent' | 'alphabetical' | 'progress' | 'added';
    order: 'asc' | 'desc';
  };
  
  search: {
    query: string;
    scope: 'title' | 'metadata' | 'content';
  };
}
```

---

## Decisions Recorded

| Question | Decision | Rationale |
|----------|----------|-----------|
| 1. Default View | **E. Adaptive** | User choice between grid/list, remembers preference |
| 2. Organization | **C + D. Both + Auto-organized** | Folders, tags, AND AI-suggested categories |
| 3. Search Scope | **A. Titles only** | Fast, simple search |
| 4. Generated Stories | **D. Nested** | Stories appear under their source manga |
| 5. Quick Actions | **As suggested** | Continue, Analyze, Export, Edit, Share, Delete, Duplicate |
| 6. Empty State | **D. Tutorial** | Explain how to use app when library empty |

### Adaptive Default View

```typescript
interface AdaptiveDefaultView {
  // User chooses view
  userChoice: true;
  
  views: {
    gridLarge: {
      name: 'Grid';
      cardSize: 'large';  // 200x280px covers
      info: 'title + progress';
    };
    gridSmall: {
      name: 'Compact Grid';
      cardSize: 'small';  // 120x170px covers
      info: 'title only';
    };
    listDetailed: {
      name: 'List';
      columns: ['cover', 'title', 'status', 'date', 'actions'];
    };
    listCompact: {
      name: 'Compact List';
      columns: ['title', 'status'];
    };
  };
  
  // Remember preference
  persistPreference: true;
  default: 'gridLarge';
}
```

### Both + Auto-Organized

```typescript
interface BothAndAutoOrganized {
  // Manual organization
  manual: {
    folders: {
      enabled: true;
      hierarchy: 'unlimited-depth';
    };
    tags: {
      enabled: true;
      multiple: true;
      colors: true;
    };
  };
  
  // Auto-organization
  auto: {
    enabled: true;
    categories: {
      byGenre: 'Action, Romance, Mystery, etc.';
      byStatus: 'Reading, Completed, Unread';
      byAnalysis: 'Analyzed, Unanalyzed';
      byDate: 'Recently Added, This Month, This Year';
    };
    suggestions: 'AI-suggested folders/tags';
  };
}
```

### Titles-Only Search

```typescript
interface TitlesOnlySearch {
  // Fast, simple search
  scope: 'titles-only';
  
  // Options
  options: {
    fuzzy: true;  // Tolerate typos
    prefix: true; // Match start of title
  };
  
  // Performance
  debounce: '150ms';
  indexing: 'client-side';
  
  // Results
  display: 'instant';
  highlight: true;
}
```

### Nested Generated Stories

```typescript
interface NestedGeneratedStories {
  // Hierarchy
  structure: {
    sourceManga: {
      title: 'Original Manga';
      cover: 'source-cover.jpg';
      children: {
        branches: 'Branch folders';
        stories: 'Generated story continuations';
      };
    };
  };
  
  // Visual indication
  indicators: {
    hasBranches: 'branch-icon';
    hasStories: 'story-count-badge';
    analyzed: 'analysis-complete-check';
  };
  
  // Navigation
  expandCollapse: true;
  defaultExpanded: false;
}
```

### Quick Actions Priority

```typescript
interface QuickActionsPriority {
  // As suggested order
  priority: [
    {
      action: 'continue';
      label: 'Continue Reading';
      primary: true;
      showWhen: 'has-progress';
    },
    {
      action: 'analyze';
      label: 'Analyze';
      primary: true;
      showWhen: 'unanalyzed';
    },
    {
      action: 'export';
      label: 'Export';
      primary: false;
    },
    {
      action: 'edit';
      label: 'Edit Metadata';
      primary: false;
    },
    {
      action: 'share';
      label: 'Share';
      primary: false;
    },
    {
      action: 'delete';
      label: 'Delete';
      primary: false;
      destructive: true;
    },
    {
      action: 'duplicate';
      label: 'Duplicate';
      primary: false;
    }
  ];
}
```

### Tutorial Empty State

```typescript
interface TutorialEmptyState {
  // When library empty
  trigger: 'zero-items';
  
  content: {
    illustration: 'upload-illustration';
    headline: 'Start Your Collection';
    description: 'Upload manga to analyze stories and create branches';
    
    steps: [
      {
        number: 1;
        title: 'Upload Manga';
        description: 'Drag and drop CBZ, PDF, or image files';
      },
      {
        number: 2;
        title: 'Analyze Story';
        description: 'AI reads and understands the narrative';
      },
      {
        number: 3;
        title: 'Create Branches';
        description: 'Explore "what if" scenarios';
      },
      {
        number: 4;
        title: 'Read & Write';
        description: 'Continue the story your way';
      }
    ];
    
    cta: {
      label: 'Upload Your First Manga';
      action: 'open-upload';
    };
  };
}
```

---

## Status: ✅ Interrogation Complete

**Next: Sub-Component 7.3 — Upload Flow**
