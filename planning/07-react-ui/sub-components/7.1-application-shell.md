# Sub-Component 7.1: Application Shell

## Purpose
The foundational container — navigation, layout structure, theming, global state management, and responsive behavior.

---

## Requirements Gathering

### Question 1: Navigation Structure

**Navigation structure — sidebar, top bar, or both?**

Options:
- **A. Top bar only:** Horizontal navigation, clean minimalism
- **B. Sidebar only:** Vertical navigation, more space for items
- **C. Both:** Top bar for branding/actions, sidebar for navigation
- **D. Contextual:** Navigation changes based on current view
- **E. Hidden/overlay:** Navigation hidden, revealed via gesture/menu

Apple Reference:
- macOS apps: Often sidebar + toolbar (Notes, Mail)
- iPad apps: Sidebar for primary navigation
- Web: Varies, but clean top navigation common

Considerations:
- Sidebar = more nav items, easier scanning
- Top bar = more vertical space for content
- Both = familiar but potentially cluttered

### Question 2: Theme Approach

**Theme approach — system preference, manual toggle, or both?**

Options:
- **A. System only:** Always match OS preference
- **B. Manual only:** User explicitly chooses
- **C. Both (default system):** Default to OS, allow override
- **D. Auto-switching:** Time-based (light day, dark night)
- **E. Per-content:** Different themes for different views

Apple Reference:
- macOS/iOS: System-wide appearance setting
- Most Apple apps respect system preference
- Some offer app-specific override

Considerations:
- System matching = consistent OS experience
- Manual control = user agency
- Both = best of both worlds

### Question 3: Mobile Strategy

**Mobile strategy — responsive web or dedicated mobile views?**

Options:
- **A. Responsive web:** Single codebase, adapts to screen
- **B. Mobile-specific views:** Different layouts for mobile
- **C. Desktop-first:** Full features desktop, simplified mobile
- **D. Mobile-first:** Design for mobile, scale up
- **E. Tablet-optimized:** Specific attention to tablet experience

Apple Reference:
- Apple.com: Responsive, works on all devices
- Native apps: Platform-specific design
- Web apps: Usually responsive

Considerations:
- Responsive = maintainability
- Mobile-specific = better UX but more work
- Desktop-first = risk of mobile neglect

### Question 4: Animation Philosophy

**Animation philosophy — subtle (Apple) or more pronounced?**

Options:
- **A. Minimal:** Almost no animations, instant transitions
- **B. Subtle (Apple style):** Short durations, ease curves, purposeful
- **C. Moderate:** Noticeable but not distracting
- **D. Expressive:** Rich animations, personality
- **E. User-controlled:** User adjusts animation level

Apple Reference:
- Apple uses purposeful, short animations
- Duration: Usually 200-400ms
- Easing: Ease-out for entrances, ease-in for exits
- Purpose: Guide attention, show relationships

Considerations:
- Subtle = premium feel, doesn't distract
- More animation = personality but potentially distracting
- User preference = accessibility for motion sensitivity

### Question 5: Layout Density

**Layout density — compact information or breathable whitespace?**

Options:
- **A. Compact:** Maximum information, minimal spacing
- **B. Moderate:** Balanced information and space
- **C. Airy (Apple style):** Generous whitespace, focus on content
- **D. Adjustable:** User controls density
- **E. Contextual:** Dense for data, airy for reading

Apple Reference:
- Apple.com: Very generous whitespace
- Apple apps: Comfortable spacing, not cramped
- Focus on content, not chrome

Considerations:
- Airy = premium, easier to scan
- Compact = more content visible
- Contextual = appropriate for use case

### Question 6: Primary Actions

**Where should primary actions be located?**

Options:
- **A. Top right:** Traditional desktop app location
- **B. Floating action button:** Material design style
- **C. Contextual:** Near related content
- **D. Command palette:** Keyboard-driven, search-like
- **E. Multiple locations:** Redundant access points

Apple Reference:
- macOS: Toolbar buttons, menu bar
- iOS: Navigation bar buttons
- Web: Top right common for primary actions

Considerations:
- Consistency with platform conventions
- Contextual = intuitive but less consistent
- Multiple locations = accessible but potentially cluttered

---

## Technical Considerations

### Shell Architecture

```typescript
interface ApplicationShell {
  // Navigation
  navigation: {
    type: 'sidebar' | 'topbar' | 'both';
    items: NavItem[];
    collapsed: boolean;
  };
  
  // Theme
  theme: {
    mode: 'light' | 'dark' | 'system';
    respectSystem: boolean;
  };
  
  // Layout
  layout: {
    density: 'compact' | 'moderate' | 'airy';
    responsive: boolean;
  };
  
  // Animations
  animations: {
    enabled: boolean;
    duration: number;
    style: 'minimal' | 'subtle' | 'moderate';
  };
}
```

---

## Decisions Recorded

| Question | Decision | Rationale |
|----------|----------|-----------|
| 1. Navigation Structure | **C. Both** | Top bar for branding/actions, sidebar for navigation |
| 2. Theme Approach | **B. Manual only** | User explicitly chooses theme |
| 3. Mobile Strategy | **C. Desktop-first** | Full features desktop, simplified mobile |
| 4. Animation Philosophy | **B. Subtle Apple style** | Short durations, purposeful, 200-400ms |
| 5. Layout Density | **C. Airy Apple style** | Generous whitespace, focus on content |
| 6. Primary Actions | **C. Contextual** | Near related content for intuitiveness |

### Navigation: Top Bar + Sidebar

```typescript
interface NavigationStructure {
  type: 'both';
  
  topBar: {
    height: '64px';
    content: {
      left: 'Logo, Current view title';
      center: 'Optional search';
      right: 'Primary actions, User menu';
    };
  };
  
  sidebar: {
    width: '240px';
    collapsible: true;
    items: [
      'Library',
      'Upload',
      'Analysis',
      'Anchors',
      'Branches',
      'Reader',
      'Settings'
    ];
  };
}
```

### Manual Theme Selection

```typescript
interface ManualThemeSelection {
  // User explicitly chooses
  mode: 'manual-only';
  
  options: {
    light: {
      background: '#ffffff';
      text: '#1d1d1f';
    };
    dark: {
      background: '#000000';
      text: '#f5f5f7';
    };
    auto: null;  // Not offered
  };
  
  // Location in settings
  settingsPath: 'Settings > Appearance';
  
  // Default
  default: 'light';
}
```

### Desktop-First Responsive Strategy

```typescript
interface DesktopFirstResponsive {
  // Primary design for desktop
  primary: 'desktop';
  
  breakpoints: {
    desktop: {
      minWidth: '1024px';
      layout: 'sidebar + content';
      features: 'full';
    };
    tablet: {
      minWidth: '768px';
      layout: 'collapsible sidebar';
      features: 'full';
    };
    mobile: {
      maxWidth: '767px';
      layout: 'bottom nav or hamburger';
      features: 'simplified';
    };
  };
  
  // Mobile simplifications
  mobileSimplifications: {
    reducedNavigation: true;
    simplifiedUpload: true;
    focusedReader: true;
    hiddenAdvancedFeatures: true;
  };
}
```

### Subtle Apple-Style Animations

```typescript
interface SubtleAppleAnimations {
  style: 'subtle';
  
  durations: {
    micro: '100ms';    // Button states
    short: '200ms';    // Transitions
    medium: '300ms';   // Page transitions
    long: '400ms';     // Complex animations
  };
  
  easings: {
    entrance: 'ease-out';
    exit: 'ease-in';
    standard: 'ease-in-out';
    spring: 'cubic-bezier(0.34, 1.56, 0.64, 1)';
  };
  
  // Purposeful animations only
  purposes: {
    navigation: 'slide or fade';
    modal: 'scale + fade';
    list: 'staggered fade';
    loading: 'subtle pulse';
  };
}
```

### Airy Layout Density

```typescript
interface AiryLayoutDensity {
  density: 'airy';
  
  spacing: {
    xs: '8px';
    sm: '16px';
    md: '24px';
    lg: '32px';
    xl: '48px';
    '2xl': '64px';
  };
  
  // Apple-style generous margins
  margins: {
    screen: '48px';
    section: '32px';
    card: '24px';
    element: '16px';
  };
  
  // Card padding
  cardPadding: '24px';
  
  // Breathing room
  lineHeight: 1.6;
}
```

### Contextual Primary Actions

```typescript
interface ContextualPrimaryActions {
  placement: 'contextual';
  
  examples: {
    library: {
      action: 'Upload Manga';
      location: 'Top right of library view';
    };
    analysis: {
      action: 'Find Anchors';
      location: 'Below analysis summary';
    };
    reader: {
      action: 'Next Chapter';
      location: 'Bottom of chapter content';
    };
    branches: {
      action: 'Generate Branches';
      location: 'Center of branch studio';
    };
  };
  
  // Consistent styling
  style: {
    button: 'Primary blue, pill shape';
    size: '48px height';
    icon: 'Leading icon when applicable';
  };
}
```

---

## Status: ✅ Interrogation Complete

**Next: Sub-Component 7.2 — Library Manager**
