# 7.9 Onboarding Flow

## Overview
The Onboarding Flow guides first-time users through The Loom 2's core concepts, API key setup, and a hands-on tutorial. Designed to get users from installation to their first generated branch quickly while respecting their time and providing clear value demonstration.

**User Value:** Reduced time to first success, understanding of core concepts, confident API setup, hands-on learning with real manga.

**Key Interactions:** Step-by-step wizard, contextual tooltips, interactive tutorial, progress indication, skip options at each stage.

---

## A. Core Functionality Questions

### A1. What is the optimal onboarding length?
- [ ] Option A: Quick (2-3 minutes, essential only)
- [ ] Option B: Standard (5-7 minutes, features overview)
- [ ] Option C: Comprehensive (10-15 minutes, deep dive)
- [ ] Option D: Modular (choose your path)
- [ ] Option E: Progressive (spread across first sessions)

**Decision:** **A + B** â€” Quick path for eager users, standard path with optional deep dives. Total 5-7 minutes max.

### A2. How should API key setup be handled?
- [ ] Option A: Mandatory before app use
- [ ] Option B: Optional, can use sample data
- [ ] Option C: Guided wizard with provider selection
- [ ] Option D: Video tutorial + written guide
- [ ] Option E: In-app provider account creation

**Decision:** **B + C** â€” Allow exploration with sample manga, provide guided setup when ready to create.

### A3. What tutorial format works best?
- [ ] Option A: Video walkthrough
- [ ] Option B: Interactive hands-on tutorial
- [ ] Option C: Text documentation
- [ ] Option D: Tooltips on first use
- [ ] Option E: Sample project to explore

**Decision:** **B + D + E** â€” Hands-on tutorial with tooltips, sample manga pre-loaded for exploration.

### A4. How to handle returning/new device users?
- [ ] Option A: Always show full onboarding
- [ ] Option B: Skip if settings exist
- [ ] Option C: Quick "welcome back" version
- [ ] Option D: Feature spotlight for new features
- [ ] Option E: Optional reminder of key features

**Decision:** **B + C + D** â€” Skip if configured, quick welcome for new devices, feature spotlights for updates.

### A5. What first-time actions should be prioritized?
- [ ] Option A: Upload manga immediately
- [ ] Option B: Explore sample manga first
- [ ] Option C: Configure settings
- [ ] Option D: Read documentation
- [ ] Option E: Generate first branch

**Decision:** **B + E** â€” Start with sample manga exploration, guide to first branch generation as milestone.

### A6. How to provide ongoing help after onboarding?
- [ ] Option A: No further help
- [ ] Option B: Contextual tooltips only
- [ ] Option C: Dedicated help center
- [ ] Option D: In-app chat/support
- [ ] Option E: All of the above in progressive disclosure

**Decision:** **B + C + E** â€” Contextual tips, searchable help center, progressive disclosure of advanced help.

---

## B. UI/UX Specifications

### B1. Layout & Structure

**Onboarding Flow Structure:**
```
Step 1: Welcome (1 screen)
Step 2: What is The Loom? (2-3 slides)
Step 3: Setup API Keys (optional, skippable)
Step 4: Sample Tutorial (hands-on)
Step 5: First Branch (guided)
Step 6: Complete (next steps)
```

**Welcome Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚                                                                     â”‚
â”‚                         [Logo Animation]                            â”‚
â”‚                                                                     â”‚
â”‚                    Welcome to The Loom 2                            â”‚
â”‚                                                                     â”‚
â”‚          Create branching narratives from your manga                â”‚
â”‚                                                                     â”‚
â”‚                                                                     â”‚
â”‚              [Get Started â†’]      [Skip Tour]                       â”‚
â”‚                                                                     â”‚
â”‚          Already know your way around? [Skip to Library]            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API Setup Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3 of 6                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                     â”‚
â”‚  Connect an AI Provider                                             â”‚
â”‚                                                                     â”‚
â”‚  The Loom uses AI to analyze stories and generate branches.         â”‚
â”‚  Choose a provider or skip to explore with sample manga.            â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   OpenAI     â”‚  â”‚  Anthropic   â”‚  â”‚   Skip â†’     â”‚              â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚  (Use samplesâ”‚              â”‚
â”‚  â”‚  [Setup â†’]   â”‚  â”‚  [Setup â†’]   â”‚  â”‚   for now)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                     â”‚
â”‚  [â† Back]                                          [Skip to Library]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tutorial Interface:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tutorial: Your First Branch                              [Ã— Exit]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚                    [Sample Manga Viewer]                      â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚           â† Click here to select an anchor point              â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ðŸ’¡ Tip: Anchor points are moments where the story could    â”‚   â”‚
â”‚  â”‚     have gone differently. Look for key decisions!          â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚     [â† Previous]        [3 of 8]        [Next â†’]            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### B2. Visual Design

**Welcome Animation:**
- Logo reveal: Fade + scale from 0.8, 600ms
- Text stagger: 100ms between elements
- Background: Subtle gradient animation
- CTA button: Pulse subtle glow

**Progress Indicator:**
- Top of screen: Step dots (6 total)
- Active: Filled circle, accent color
- Completed: Checkmark
- Future: Empty circle, muted
- Transition: Line draws between steps

**Card-Based Slides:**
- Large illustration (top 50%)
- Headline + description (bottom 50%)
- Swipe gesture support
- Dot indicators for multi-slide steps

**Spotlight/Highlight:**
- Dark overlay on non-target areas
- Cutout around target element
- Pulsing ring around target
- Instruction tooltip attached

**Celebration States:**
- Checkmark animation on completion
- Confetti (subtle) on milestone
- Progress bar fills with gradient

**Apple Aesthetic:**
- Clean, uncluttered screens
- Large touch targets (min 44px)
- Generous whitespace
- Purposeful motion (not overwhelming)

### B3. Animations & Interactions

**Screen Transitions:**
- Forward: Slide from right, 400ms ease-out
- Back: Slide from left, 400ms ease-out
- Same-step slide: Horizontal scroll snap

**Interactive Elements:**
- Cards lift on hover/tap
- Buttons: Scale 0.97 on press
- Input fields: Border glow on focus

**Tutorial Spotlight:**
- Overlay fade: 300ms
- Target highlight: Expand from center
- Tooltip: Slide up + fade, 250ms
- Hotspot pulse: 2s infinite

**Progress Animations:**
- Step completion: Checkmark draws, 400ms
- Progress bar: Width transition, 600ms
- Counter: Number roll animation

**Micro-interactions:**
- Skip button: Confirm on first click
- Success: Subtle haptic (if available)
- Error: Shake + red flash

---

## C. Data & State Management

### C1. Data Requirements

**Onboarding State:**
```typescript
interface OnboardingState {
  // Progress
  currentStep: number;
  totalSteps: number;
  completedSteps: number[];
  
  // User choices
  skippedApiSetup: boolean;
  selectedProvider?: string;
  
  // Tutorial progress
  tutorialCompleted: boolean;
  tutorialStep: number;
  interactionsCompleted: string[];
  
  // State
  hasSeenOnboarding: boolean;
  onboardingVersion: string; // For showing new features
  
  // Sample data
  sampleMangaLoaded: boolean;
  firstBranchGenerated: boolean;
}

interface OnboardingStep {
  id: string;
  title: string;
  description: string;
  type: 'welcome' | 'info' | 'api-setup' | 'tutorial' | 'completion';
  skippable: boolean;
  slides?: {
    image: string;
    headline: string;
    description: string;
  }[];
}

interface TutorialStep {
  id: string;
  targetElement: string; // CSS selector
  title: string;
  content: string;
  position: 'top' | 'bottom' | 'left' | 'right';
  action?: 'click' | 'hover' | 'type' | 'scroll';
  waitForAction: boolean;
}
```

**Sample Content:**
```typescript
interface SampleContent {
  manga: {
    id: 'sample-manga-1';
    title: 'Sample Manga: The Choice';
    chapters: 3;
    preAnalyzed: true;
  };
  preGeneratedBranches: Branch[];
  tutorialAnchors: AnchorEvent[];
}
```

### C2. State Management

**Zustand Store:**
```typescript
interface OnboardingStore {
  // State
  isOnboarding: boolean;
  currentStep: number;
  tutorialActive: boolean;
  tutorialStep: number;
  spotlightTarget: string | null;
  
  // Persistence
  hasCompletedOnboarding: boolean;
  onboardingVersion: string;
  
  // Actions
  startOnboarding: () => void;
  skipOnboarding: () => void;
  nextStep: () => void;
  previousStep: () => void;
  goToStep: (step: number) => void;
  completeStep: (stepId: string) => void;
  
  // Tutorial
  startTutorial: () => void;
  nextTutorialStep: () => void;
  skipTutorial: () => void;
  setSpotlight: (target: string | null) => void;
  completeInteraction: (interactionId: string) => void;
  
  // Reset
  resetOnboarding: () => void;
  markNewFeaturesSeen: (version: string) => void;
}
```

---

## D. Performance & Optimization

### D1. Loading Strategy

**Progressive Loading:**
- Critical UI first (navigation, buttons)
- Illustrations lazy loaded
- Sample manga preloaded in background
- API setup deferred until needed

**Bundle Size:**
- Onboarding as separate chunk
- Illustrations as webp with fallbacks
- Sample content compressed

### D2. Responsive Design

**Mobile:**
- Full-screen slides
- Swipe navigation
- Bottom-sheet for tooltips
- Simplified animations

**Desktop:**
- Centered card layout
- Side-by-side content
- Hover states
- Keyboard navigation

### D3. Performance Targets

| Metric | Target |
|--------|--------|
| First Screen | < 1s |
| Slide Transition | < 400ms |
| Tutorial Spotlight | < 200ms |
| Sample Manga Load | < 3s (background) |

---

## E. Error Handling & Edge Cases

### E1. User Skips Onboarding
- Remember choice but offer resume
- "Continue tour" button in settings
- Contextual tips enabled for first uses

### E2. API Setup Failure During Onboarding
- Don't block progress
- Offer: "Continue with samples" | "Try again" | "Skip for now"
- Reminder later when user tries to generate

### E3. Tutorial Target Element Missing
- Graceful fallback to description-only
- Log error for debugging
- Advance to next step automatically

### E4. Returning User with New Version
- Check onboardingVersion vs current
- Show "What's New" spotlight for new features
- Option to skip or see full tour

### E5. Incomplete Onboarding
- Resume from last completed step
- Show progress indicator on return
- Don't force restart

### E6. Accessibility Needs
- Respect prefers-reduced-motion
- Screen reader optimized
- Keyboard-only navigation path
- Sufficient color contrast throughout

---

## Feature Summary

| ID | Feature | Priority | Est. Hours |
|----|---------|----------|------------|
| F1 | Welcome screen with animation | P0 | 6 |
| F2 | Multi-step wizard framework | P0 | 10 |
| F3 | Feature introduction slides | P0 | 8 |
| F4 | API setup wizard | P0 | 8 |
| F5 | Interactive tutorial system | P0 | 12 |
| F6 | Spotlight/highlight overlay | P1 | 8 |
| F7 | Sample manga pre-loading | P1 | 6 |
| F8 | Progress tracking and resume | P1 | 6 |
| F9 | Skip and exit handling | P1 | 4 |
| F10 | Contextual help integration | P2 | 6 |
| F11 | What's new / feature spotlights | P2 | 6 |
| F12 | Accessibility compliance | P1 | 8 |

## Effort Estimate

**Total Estimated Hours: 98 hours**

**Breakdown:**
- Core onboarding flow: 30 hours
- Tutorial and spotlight system: 24 hours
- API setup integration: 14 hours
- Sample content creation: 12 hours
- Contextual help: 10 hours
- Testing and refinement: 8 hours
